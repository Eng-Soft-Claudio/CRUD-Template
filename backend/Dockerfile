# backend/Dockerfile

# =======================================================================================================
# --- Imagem Base ---                                                                               #####
# =======================================================================================================
FROM python:3.13-slim

# =======================================================================================================
# --- Variáveis de Ambiente ---                                                                     #####
# =======================================================================================================
ENV PYTHONDONTWRITEBYTECODE 1
ENV PYTHONUNBUFFERED 1

# =======================================================================================================
# --- Diretório de Trabalho ---                                                                     #####
# =======================================================================================================
WORKDIR /app

# =======================================================================================================
# --- Instalação de Dependências Python ---                                                           #####
# =======================================================================================================
COPY requirements.txt .
RUN pip install --no-cache-dir -r requirements.txt

# =======================================================================================================
# --- Copiando Código da Aplicação e Entrypoint ---                                                 #####
# =======================================================================================================
COPY entrypoint.sh /app/entrypoint.sh
RUN chmod +x /app/entrypoint.sh

COPY . .

# =======================================================================================================
# --- Exposição de Porta ---                                                                        #####
# =======================================================================================================
EXPOSE 8000

# =======================================================================================================
# --- Comando de Entrypoint ---                                                                     #####
# =======================================================================================================
ENTRYPOINT ["/app/entrypoint.sh"]
