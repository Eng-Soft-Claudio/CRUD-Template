# frontend/Dockerfile

# =======================================================================================================
# --- Estágio de Desenvolvimento ---                                                                #####
# =======================================================================================================
# Use uma imagem base oficial do Node.js. Alpine é uma boa escolha por ser leve.
FROM node:18-alpine AS development

# =======================================================================================================
# --- Diretório de Trabalho ---                                                                     #####
# =======================================================================================================
WORKDIR /app

# =======================================================================================================
# --- Instalação de Dependências ---                                                                #####
# =======================================================================================================
COPY package.json package-lock.json ./

# =======================================================================================================
# --- Permissões para o Usuário ---                                                                #####
# =======================================================================================================
RUN chown -R node:node /app
USER node
RUN npm ci

# =======================================================================================================
# --- Copiando Código da Aplicação ---                                                              #####
# =======================================================================================================
COPY --chown=node:node . .

# =======================================================================================================
# --- Exposição de Porta ---                                                                        #####
# =======================================================================================================
EXPOSE 5173

# =======================================================================================================
# --- Comando de Execução ---                                                                       #####
# =======================================================================================================
CMD ["npm", "run", "dev"]

# =======================================================================================================
# --- NOTA PARA PRODUÇÃO ---                                                                        #####
# =======================================================================================================
# Este Dockerfile é otimizado para DESENVOLVIMENTO com hot-reloading.
# Para PRODUÇÃO, você usaria um build multi-stage:
# 1. Um estágio 'builder' similar a este para rodar `npm run build`.
# 2. Um segundo estágio final usando uma imagem leve de servidor web (ex: nginx:alpine)
#    para copiar os artefatos da build (do diretório 'dist') e servi-los estaticamente.
# =======================================================================================================
